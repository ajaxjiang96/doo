{% extends "base.html" %} {% block left %}
<div id={{event.id}} class="card event">
    <h3>{{event.owner}}'s</h3>
    <hr />
    <h1>{{event.title}}</h1>
    <div class="date">
        <h3>{{event.time.getFullYear()}}-{{event.time.getMonth() + 1}}-{{event.time.getDate()}}</h3>
    </div>
    <div class="tags">
        <div class="tag">
            {{event.type}}
        </div>
    </div>
    <div class="interactions">
        <a class="action doComment" role="button">
            <span class="buttonText commentButtonText">
                        {{event.comments.length}} Comment{% if event.comments.length!=1 %}s{% endif%}
                    </span>
        </a>
        <a class="action doPlus1 {% if user.username in event.liked%}liked{% endif%}" role="button">
            <!-- <img class="likeIcon" src="{% if user.username in event.liked%}images/like.svg{% else %}images/liked.svg{% endif %}" /> -->
            <span class="buttonText plus1ButtonText">
                         {% if event.value < 999 %}{{event.value}}{% else%}999+{% endif %}
                     </span>
        </a>
    </div>
    {% if user.username %}
    <div class="singleCommentBar">
        <form class="commentEntry" action="/comment" method="post">
            <input name="content" type="text" placeholder="New Comment" required/>
            <button class="sendButton" type="submit">Send</button>
            <input name="event" value={{event.id}} hidden/>
        </form>
    </div>
    {% endif %}
    <div id="comments">
        {% for comment in commentList %}
        <div id={{comment.id}} class="comment animate-opacity">
            <span class="commentOwner"><strong>{{comment.owner}}: </strong></span>{{comment.content}}
            <span class="timestamp">
                    {{comment.timestamp.getFullYear()}}-{{comment.timestamp.getMonth() + 1}}-{{comment.timestamp.getDate()}} {{comment.timestamp.getHours()}}:{{comment.timestamp.getMinutes()}}
                </span>
            {% if session.event_owner == session.username %}
            <button class="deleteComment">Delete</button>
            {% elif comment.owner == session.username %}
            <button class="deleteComment">Delete</button>
            {% endif %}
        </div>
        {% endfor %}
        <div id="commentPlaceholder" class="comment placeholder animate-opacity">
            Oops, no more comments. Do say something about this event!
        </div>
    </div>
</div>
{% endblock %}
